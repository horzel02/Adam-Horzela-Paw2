<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:p="http://primefaces.org/ui"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Lista użytkowników</title>
    <h:outputStylesheet name="css/style.css" library="template" />
</h:head>
<h:body>
    <div id="page_wrapper">
        <div class="header">Lista użytkowników</div>
        <h:form id="form-table">
            <p:panel header="Zarządzanie użytkownikami" styleClass="main-panel">
                <h:panelGrid columns="3" cellpadding="10" style="width: 100%;">
                    <h:outputLabel for="surname" value="Filtruj po nazwisku:" styleClass="ui-outputlabel" />
                    <p:inputText id="surname" value="#{userList.surnameFilter}" 
                                 styleClass="ui-inputfield"
                                 validatorMessage="Filtr nazwiska może mieć maksymalnie 50 znaków">
                        <f:validateLength maximum="50" />
                    </p:inputText>
                    <p:message for="surname" />

                    <p:commandButton value="Filtruj" action="#{userList.filter}" update="table" 
                                     styleClass="ui-button" />
                    <p:commandButton value="Dodaj nowego użytkownika" action="#{userList.newUser}" 
                                     styleClass="button-secondary" />
                </h:panelGrid>

                <p:dataTable value="#{userList.users}" var="user" id="table" style="margin-top: 20px;" styleClass="p-datatable">
                    <p:column headerText="ID">
                        <h:outputText value="#{user.id}" />
                    </p:column>
                    <p:column headerText="Imię">
                        <h:outputText value="#{user.name}" />
                    </p:column>
                    <p:column headerText="Nazwisko">
                        <h:outputText value="#{user.surname}" />
                    </p:column>
                    <p:column headerText="Email">
                        <h:outputText value="#{user.email}" />
                    </p:column>
                    <p:column headerText="Akcje">
                        <p:commandButton value="Edytuj" action="#{userList.editUser(user)}" 
                                         styleClass="ui-button" />
                        <p:commandButton value="Usuń" action="#{userList.deleteUser(user)}" 
                                         update="@form" styleClass="button-secondary" />
                    </p:column>
                </p:dataTable>
            </p:panel>
        </h:form>
    </div>
</h:body>
</html>
